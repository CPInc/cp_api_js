!function(t,e){for(var n in e)t[n]=e[n]}(exports,function(t){function e(u){if(n[u])return n[u].exports;var r=n[u]={i:u,l:!1,exports:{}};return t[u].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,u){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:u})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,n){"use strict";function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var u=e[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}return function(e,n,u){return n&&t(e.prototype,n),u&&t(e,u),e}}(),i=n(1),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a=function(){function t(e){u(this,t),e.clinican?(this.userType="clinician",this.user=e.clinician):(this.userType="patient",this.user=e.patient),this.token=e.token}return r(t,[{key:"isAuthenticated",get:function(){return!!this.token}},{key:"isClinician",get:function(){return"clinician"===this.userType}},{key:"isPatient",get:function(){return"patient"===this.userType}}]),t}(),s=null,l=function(){return s&&s.isClinician},f=function(){return s&&s.isPatient},c=function(){return s},d=function(){return s.userType},p=function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return o.default.post("/sessions",{email:t,password:e,app_id:"captureproof api"}).then(function(t){return 200===t.status&&(o.default.setAuthToken(t.data.token),s=new a(t.data)),new Promise(function(e){e(t)})}).catch(function(t){o.default.setAuthToken(""),s=null,console.log("Fucked up: ",t)})},h=function(){return s&&s.isAuthenticated};e.default={authenticate:p,isClinician:l,isPatient:f,isAuthenticated:h,userType:d,user:c},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=n(4),r=null,i=function(){var t=new Headers;return t.append("Content-Type","application/json"),t.append("Accept","application/json"),t.append("X-API-Session",r),t},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=u.baseURL+t,r=Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&");return 0===r.length?n:u.baseURL+"?"+r},a=function(t){if(401===t.status)throw new Error("unauthenticated");return new Promise(function(e){e(t)})},s=function(t){r=t},l=function(t){return t.json()},f=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=JSON.stringify(n.postData),r=0;return fetch(o(e,n.urlParams),{method:t,headers:i(),credentials:"same-origin",body:u}).then(function(t){return r=t.status,t.json()}).then(function(t){return new Promise(function(e){e({status:r,data:t})})})},c=function(t,e){return f("get",t,{urlParams:e})},d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f("post",t,{postData:e})};e.default={setAuthToken:s,handleJson:l,handleUnauthenticated:a,request:f,get:c,post:d},t.exports=e.default},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=u(r),o=n(0),a=u(o),s=function(){return i.default.get("/patients/")},l=function(t){return a.default.isPatient?null:i.default.get("/patients/"+t).then(i.default.handleJson)},f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===t&&a.default.isPatient&&(t=a.default.user.id),i.default.get("/patients/"+t+"/proofs/").then(i.default.handleJson)},c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e){if(o.isClinician)return null;e=a.default.user.id}return i.default.get("/patients/"+e+"/proofs/").then(i.default.handleJson)};e.default={all:s,get:l,proofs:f,proof:c},t.exports=e.default},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.patient=e.proof=e.auth=void 0;var r=n(0),i=u(r),o=n(5),a=u(o),s=n(2),l=u(s);e.auth=i.default,e.proof=a.default,e.patient=l.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={baseURL:"http://captureproof.makstep.ru/api/v1"},t.exports=e.default},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=u(r),o=n(2),a=u(o),s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(0,r.isClinician)()?[]:(0,r.isPatient)()&&i.default.user.id!==t?[]:a.default.proofs(t)},l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e){if((0,r.isClinician)())return null;e=i.default.user.id}return console.log("!!!!! ",e),a.default.proof(t,e)};e.default={all:s,get:l},t.exports=e.default}]));